/*!
 * Name    : Just Another Parallax [Jarallax]
 * Version : 1.0.0
 * Author  : _nK http://nkdev.info
 * GitHub  : https://github.com/nk-o/jarallax
*/ !function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){Date.now||(Date.now=function(){return new Date().getTime()}),window.requestAnimationFrame||function(){"use strict";for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var i=t[e];window.requestAnimationFrame=window[i+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var n=0;window.requestAnimationFrame=function(t){var e=Date.now(),i=Math.max(n+16,e);return setTimeout(function(){t(n=i)},i-e)},window.cancelAnimationFrame=clearTimeout}}();var e,i=function(){for(var t="transform WebkitTransform MozTransform OTransform msTransform".split(" "),e=document.createElement("div"),i=0;i<t.length;i++)if(e&&void 0!==e.style[t[i]])return t[i];return!1}(),n=function(){if(!window.getComputedStyle)return!1;var t,e=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var n in(document.body||document.documentElement).insertBefore(e,null),i)void 0!==e.style[n]&&(e.style[n]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(i[n]));return(document.body||document.documentElement).removeChild(e),void 0!==t&&t.length>0&&"none"!==t}(),a=(e=0,function i(n,a){var r,o=this;o.$item=t(n),o.defaults={speed:.5,imgSrc:null,imgWidth:null,imgHeight:null,enableTransform:!0,zIndex:-100},r=o.$item.data("jarallax")||{},o.options=t.extend({},o.defaults,r,a),o.options.speed=Math.min(1,Math.max(0,parseFloat(o.options.speed))),o.instanceID=e++,o.image={src:o.options.imgSrc||null,$container:null,$item:null,width:o.options.imgWidth||null,height:o.options.imgHeight||null},o.initImg()&&(o.initEvents(),o.init())});a.prototype.initImg=function(){var t=this;return null===t.image.src&&(t.image.src=t.$item.css("background-image").replace(/^url\(['"]?/g,"").replace(/['"]?\)$/g,"")),!!t.image.src&&"none"!==t.image.src},a.prototype.init=function(){var e=this;e.image.$container=t("<div>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden","pointer-events":"none",transition:"transform linear -1ms, -webkit-transform linear -1ms"}).prependTo(e.$item),e.image.$item=e.image.$container.clone().css({position:"fixed","pointer-events":"none","background-position":"50% 50%","background-repeat":"no-repeat no-repeat","background-image":"url("+e.image.src+")"}).prependTo(e.image.$container),e.image.$container.css({visibility:"hidden","z-index":e.options.zIndex}).attr("id","jarallax-container-"+e.instanceID).prependTo(e.$item),e.getImageSize(e.image.src,function(i,n){e.image.width=i,e.image.height=n,window.requestAnimationFrame(t.proxy(e.coverImage,e)),window.requestAnimationFrame(t.proxy(e.clipContainer,e)),window.requestAnimationFrame(t.proxy(e.onScroll,e)),e.$item.data("JarallaxOriginalStyles",e.$item.attr("style")),setTimeout(function(){e.$item.css({"background-image":"none","background-attachment":"scroll","background-size":"auto"})},0)})},a.prototype.initEvents=function(){var e,i=this;t(window).on("scroll.jarallax.jarallax-"+i.instanceID,function(){window.requestAnimationFrame(t.proxy(i.onScroll,i))}),t(window).on("resize.jarallax.jarallax-"+i.instanceID+" load.jarallax.jarallax-"+i.instanceID,function(){clearTimeout(e),e=setTimeout(function(){window.requestAnimationFrame(function(){i.coverImage(),i.clipContainer(),i.onScroll()})},100)})},a.prototype.destroy=function(){t("head #jarallax-clip-"+this.instanceID).remove(),t(window).off(".jarallax-"+this.instanceID),this.$item.attr("style",this.$item.data("JarallaxOriginalStyles")),this.$item.removeData("JarallaxOriginalStyles"),this.image.$container.remove(),delete this.$item[0].jarallax},a.prototype.getImageSize=function(t,e){if(!t||!e)return!1;var i=new Image;i.onload=function(){e(i.width,i.height)},i.src=t},a.prototype.clipContainer=function(){var e=this.image.$container.outerWidth(!0),i=this.image.$container.outerHeight(!0),n=t("head #jarallax-clip-"+this.instanceID);n.length||(t("head").append('<style type="text/css" id="jarallax-clip-'+this.instanceID+'"></style>'),n=t("head #jarallax-clip-"+this.instanceID));var a=["#jarallax-container-"+this.instanceID+" {","   clip: rect(0px "+e+"px "+i+"px 0);","   clip: rect(0px, "+e+"px, "+i+"px, 0);","}"].join("\n");n[0].styleSheet?n[0].styleSheet.cssText=a:n.html(a)},a.prototype.coverImage=function(){if(this.image.width&&this.image.height){var e=this.image.$container.outerWidth(!0),i=this.image.$container.outerHeight(!0),n=t(window).outerWidth(!0),a=t(window).outerHeight(!0),r=this.image.width,o=this.image.height,s={width:Math.max(n,e)*Math.max(this.options.speed,1),height:Math.max(a,i)*Math.max(this.options.speed,1)};if(s.width/s.height>r/o){var l=s.width*o/r;s.backgroundSize=s.width+"px "+l+"px"}else{var m=s.height*r/o;s.backgroundSize=m+"px "+s.height+"px"}this.image.$item.css(s)}},a.prototype.onScroll=function(){if(this.image.width&&this.image.height){var e=t(window).scrollTop(),a=t(window).height(),r=this.$item.offset().top,o=this.$item.outerHeight(!0),s={visibility:"visible",backgroundPosition:"50% 50%"};if(!(r+o<e)&&!(r>e+a)){var l=-(e-r)*this.options.speed;i&&this.options.enableTransform?(s.transform="translateY("+l+"px)",n&&(s.transform="translate3d(0, "+l+"px, 0)")):s.backgroundPosition="50% "+Math.round(l)+"px",this.image.$item.css(s)}}};var r=t.fn.jarallax;t.fn.jarallax=function(){for(var t,e=this,i=arguments[0],n=Array.prototype.slice.call(arguments,1),r=e.length,o=0;o<r;o++)if("object"==typeof i||void 0===i?e[o].jarallax=new a(e[o],i):t=e[o].jarallax[i].apply(e[o].jarallax,n),void 0!==t)return t;return this},t.fn.jarallax.noConflict=function(){return t.fn.jarallax=r,this},t(document).on("ready.data-jarallax",function(){t("[data-jarallax]").jarallax()})});